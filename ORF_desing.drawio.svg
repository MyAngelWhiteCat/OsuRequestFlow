<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2391px" height="3536px" viewBox="0 0 2391 3536" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 YaBrowser/25.8.0.0 Safari/537.36&quot; scale=&quot;1&quot; border=&quot;0&quot; version=&quot;28.2.9&quot;&gt;&#10;  &lt;diagram name=&quot;Страница — 1&quot; id=&quot;RbfndghXdHuYOqMOQySv&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1066&quot; dy=&quot;4261&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-1&quot; value=&quot;HTTP/S server&amp;lt;div&amp;gt;Стандартный HTTP сервер принимающий и обрабатывающий запросы&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;Открывает указанный эндроинт и случает порт. При подключении ассинхронно создает сессию и отдает ее.&amp;lt;br&amp;gt;Хранит у себя обработчик запросов&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=29;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;775&quot; y=&quot;-2390&quot; width=&quot;860&quot; height=&quot;310&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-2&quot; value=&quot;FileManager&amp;lt;br&amp;gt;(Абстракция над std::filesystem)&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Предоставляет возможности чтения и записи диска.&amp;lt;br&amp;gt;Создает, редактирует, удаляет файлы.&amp;amp;nbsp;&amp;lt;br&amp;gt;Хранит состояние - историю записанных файлов.&amp;lt;br&amp;gt;&amp;lt;span style=&amp;quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&amp;quot;&amp;gt;&amp;lt;br&amp;gt;Имеет возможность удаления конкретного файла из истории записи или всех.&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;То есть метод Write() выполняющий запись данных на диск будет так же сохранять fs::path к записанному фалу и предоставлять к нему доступ и удаление за константное время.&amp;amp;nbsp;&amp;lt;/span&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=24;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1600&quot; y=&quot;740&quot; width=&quot;820&quot; height=&quot;390&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-3&quot; value=&quot;LoopbackServer&amp;lt;br&amp;gt;Абстракция над http сервером обеспечивающая ТОЛЬКО loopback соединение.&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;В текузей версии не предусмотренно инных подключений, в следубщий версиях, при подключении oauth твича, будет возможность модераторов подключаться к https серверу стрмера и так же заниматься настройками.&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=26;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;840&quot; y=&quot;-2043&quot; width=&quot;730&quot; height=&quot;290&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-5&quot; value=&quot;IRCClient&amp;lt;br&amp;gt;(Абстракция над TCPConnection к IRC серверу твича)&amp;lt;br&amp;gt;Чтение чата&amp;lt;div&amp;gt;классификация сообщений&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Передача сообщений обработчику&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Подключение к чату и обработка остальных IRC сообщений&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=28;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;830&quot; y=&quot;-450&quot; width=&quot;730&quot; height=&quot;320&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-6&quot; value=&quot;Downloader&amp;lt;div&amp;gt;(Абстракция над Connection и FileManager)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;amp;nbsp;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Делает запросы к передаваемым эндпоинтам.&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Полученный ответ записывает в файл с указанным форматом используя FIleManager::Write&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Download(ep, &amp;quot;osz&amp;quot;);&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=23;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;950&quot; y=&quot;690&quot; width=&quot;490&quot; height=&quot;320&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-7&quot; value=&quot;TCPConnection&amp;lt;br&amp;gt;(Абстракция над socket/ssl::stream)&amp;lt;div&amp;gt;Коннект - дисконнект&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Чтение - Запись&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Не следит за состоянием полученных сообщений - читает весь сокет и передает обработчику&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=32;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;30&quot; y=&quot;720&quot; width=&quot;810&quot; height=&quot;425&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-8&quot; value=&quot;MessageProcessor&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;(прослойка между IRCClient и MessageHandler)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;подготавливает сырые сообщения прочитанные из клиента для передачи в MessageHandler&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Берет на себя парсинг и класификацию.&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Следит за состоянием сообщений, обеспечивает их инвариант посредством хранения состояний неполных сообщений (Когда последние байты считанные с сокета являются обрывком сообщения, которое придет в начале следующих байт)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;Принимает решение - продолжать чтение или прерывать соединение.&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=25;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;540&quot; y=&quot;-60&quot; width=&quot;1280&quot; height=&quot;380&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-9&quot; value=&quot;MessageHandler&amp;lt;div&amp;gt;(Обработчик сообщений)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Не следит за состояниями&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Ожидает идеальных, классифицированных сообщений&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Читает сообщение - ищет ссылку на карту&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Должен выполняться в отельном потоке&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;в текущей реализации обеспечивает ТОЛЬКО скачивание файлов&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;ХРАНИТ экземпляр downloader - следственно хранит Connection - риск циклической зависимости при неаккуратном использовании.&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=19;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;590&quot; y=&quot;370&quot; width=&quot;1160&quot; height=&quot;270&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-10&quot; value=&quot;Session&amp;lt;br&amp;gt;(Абстракция над Connection)&amp;lt;br&amp;gt;Чтение и запись http запросов.&amp;lt;br&amp;gt;Считывает запрос из Connection обеспечивает его http-валидность и передает обработчику&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Отвечает в сокет, если запрос не http-валидный&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=28;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;695&quot; y=&quot;-1720&quot; width=&quot;1000&quot; height=&quot;290&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-11&quot; value=&quot;RequestHander&amp;lt;div&amp;gt;(Обработка http запросов)&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Обрабатывает все эндпоинты. Отдает ответы об успехе/ошибке&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Способен просканировать состояние ВСЕЙ системы и передать его в ответе на state эндпоинт&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Взаимодействует напрямую с фронтом. Реализует 2 класса: для обработки &amp;quot;API&amp;quot; запросов и запросов к файловой системе (Отдача статических файлов)&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;По сути, именно он и является GUI&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=19;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;780&quot; y=&quot;-1400&quot; width=&quot;830&quot; height=&quot;290&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-12&quot; value=&quot;GUI&amp;lt;div&amp;gt;&amp;lt;br&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Интерфейс для настроек системы и отслеживания ее состояния.&amp;lt;br&amp;gt;Реализует паттерн &amp;quot;Фасад&amp;quot;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;Подразумевает прослойку между системой и всеми возможными способами реализации GUI&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;В нашем случае - HTTP-LoopbackServer&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Определяет все методы для работы с состоянием ядра.&amp;lt;/div&amp;gt;&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=24;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;70&quot; y=&quot;-1050&quot; width=&quot;2240&quot; height=&quot;250&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-16&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;exitX=1.003;exitY=0.467;exitDx=0;exitDy=0;exitPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-6&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1860&quot; y=&quot;360&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1610&quot; y=&quot;839&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-17&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;exitX=0.017;exitY=0.469;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.002;entryY=0.283;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-6&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-7&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1020&quot; y=&quot;710&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;870&quot; y=&quot;1280&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;880&quot; y=&quot;840&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-19&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.515;entryY=0.002;entryDx=0;entryDy=0;exitX=0.507;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-5&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-8&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1240&quot; y=&quot;-70&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1010&quot; y=&quot;250&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-21&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=19;&quot; parent=&quot;1&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-7&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;550&quot; y=&quot;120&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;720&quot; y=&quot;1280&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;435&quot; y=&quot;120&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-22&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;exitX=0.526;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-9&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1170&quot; y=&quot;460&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1200&quot; y=&quot;690&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;JN6cPMw-TxOQun5K3mFb-26&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.526;entryY=-0.001;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-9&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1200&quot; y=&quot;320&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1480&quot; y=&quot;350&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-1&quot; value=&quot;Core&amp;lt;br&amp;gt;Ядро системы.&amp;amp;nbsp;&amp;lt;br&amp;gt;Владеет клиентом, может его уничтожать и создавать нового для изменения конфигурации без перезапуска программы.&amp;lt;br&amp;gt;Имеет все методы необходимые как для настроек запуска клиента так и для изменения состояния клиента в реальном времени&quot; style=&quot;shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=27;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;70&quot; y=&quot;-740&quot; width=&quot;2240&quot; height=&quot;250&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-2&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.506;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.504;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;HuWuF-aMGyjMVbHq1HGF-1&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-5&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1200&quot; y=&quot;-380&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1240.9999999999998&quot; y=&quot;-320&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-3&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.504;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.504;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-12&quot; target=&quot;HuWuF-aMGyjMVbHq1HGF-1&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1199.6&quot; y=&quot;-790&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1199.7599999999998&quot; y=&quot;-660&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-10&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.503;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-11&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-12&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1180&quot; y=&quot;-1160&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1340&quot; y=&quot;-1160&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-11&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-10&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-11&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1180&quot; y=&quot;-1360&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1340&quot; y=&quot;-1360&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-12&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-1&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-3&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1110&quot; y=&quot;-2110&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1270&quot; y=&quot;-2110&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;HuWuF-aMGyjMVbHq1HGF-13&quot; value=&quot;&quot; style=&quot;endArrow=diamondThin;endFill=1;endSize=24;html=1;rounded=0;entryX=0.505;entryY=-0.002;entryDx=0;entryDy=0;exitX=0.495;exitY=1.008;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;fontSize=19;&quot; parent=&quot;1&quot; source=&quot;JN6cPMw-TxOQun5K3mFb-3&quot; target=&quot;JN6cPMw-TxOQun5K3mFb-10&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;160&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1110&quot; y=&quot;-1830&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1270&quot; y=&quot;-1830&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="JN6cPMw-TxOQun5K3mFb-1"><g transform="translate(0.5,0.5)"><path d="M 755 0 L 1605 0 L 1605 310 L 755 310 L 755 40 L 745 40 L 745 30 L 755 30 L 755 20 L 745 20 L 745 10 L 755 10 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 755 10 L 765 10 L 765 20 L 755 20 M 755 30 L 765 30 L 765 40 L 755 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 838px; height: 1px; padding-top: 7px; margin-left: 766px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 29px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">HTTP/S server<div>Стандартный HTTP сервер принимающий и обрабатывающий запросы</div><div><br />Открывает указанный эндроинт и случает порт. При подключении ассинхронно создает сессию и отдает ее.<br />Хранит у себя обработчик запросов</div></div></div></div></foreignObject><text x="1185" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="29px" text-anchor="middle">HTTP/S server...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-2"><g transform="translate(0.5,0.5)"><path d="M 1580 3130 L 2390 3130 L 2390 3520 L 1580 3520 L 1580 3170 L 1570 3170 L 1570 3160 L 1580 3160 L 1580 3150 L 1570 3150 L 1570 3140 L 1580 3140 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1580 3140 L 1590 3140 L 1590 3150 L 1580 3150 M 1580 3160 L 1590 3160 L 1590 3170 L 1580 3170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 798px; height: 1px; padding-top: 3137px; margin-left: 1591px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FileManager<br />(Абстракция над std::filesystem)<br /><br />Предоставляет возможности чтения и записи диска.<br />Создает, редактирует, удаляет файлы. <br />Хранит состояние - историю записанных файлов.<br /><span style="background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><br />Имеет возможность удаления конкретного файла из истории записи или всех.<br /><br />То есть метод Write() выполняющий запись данных на диск будет так же сохранять fs::path к записанному фалу и предоставлять к нему доступ и удаление за константное время. </span></div></div></div></foreignObject><text x="1990" y="3161" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="24px" text-anchor="middle">FileManager...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-3"><g transform="translate(0.5,0.5)"><path d="M 820 347 L 1540 347 L 1540 637 L 820 637 L 820 387 L 810 387 L 810 377 L 820 377 L 820 367 L 810 367 L 810 357 L 820 357 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 820 357 L 830 357 L 830 367 L 820 367 M 820 377 L 830 377 L 830 387 L 820 387" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 708px; height: 1px; padding-top: 354px; margin-left: 831px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 26px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LoopbackServer<br />Абстракция над http сервером обеспечивающая ТОЛЬКО loopback соединение.<br /><br />В текузей версии не предусмотренно инных подключений, в следубщий версиях, при подключении oauth твича, будет возможность модераторов подключаться к https серверу стрмера и так же заниматься настройками.</div></div></div></foreignObject><text x="1185" y="380" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="26px" text-anchor="middle">LoopbackServer...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-5"><g transform="translate(0.5,0.5)"><path d="M 810 1940 L 1530 1940 L 1530 2260 L 810 2260 L 810 1980 L 800 1980 L 800 1970 L 810 1970 L 810 1960 L 800 1960 L 800 1950 L 810 1950 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 810 1950 L 820 1950 L 820 1960 L 810 1960 M 810 1970 L 820 1970 L 820 1980 L 810 1980" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 708px; height: 1px; padding-top: 1947px; margin-left: 821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 28px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">IRCClient<br />(Абстракция над TCPConnection к IRC серверу твича)<br />Чтение чата<div>классификация сообщений</div><div>Передача сообщений обработчику</div><div>Подключение к чату и обработка остальных IRC сообщений</div></div></div></div></foreignObject><text x="1175" y="1975" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="28px" text-anchor="middle">IRCClient...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-6"><g transform="translate(0.5,0.5)"><path d="M 930 3080 L 1410 3080 L 1410 3400 L 930 3400 L 930 3120 L 920 3120 L 920 3110 L 930 3110 L 930 3100 L 920 3100 L 920 3090 L 930 3090 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 930 3090 L 940 3090 L 940 3100 L 930 3100 M 930 3110 L 940 3110 L 940 3120 L 930 3120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 3087px; margin-left: 941px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 23px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Downloader<div>(Абстракция над Connection и FileManager)</div><div> <br /></div><div>Делает запросы к передаваемым эндпоинтам.</div><div>Полученный ответ записывает в файл с указанным форматом используя FIleManager::Write<br /><br />Download(ep, "osz");</div></div></div></div></foreignObject><text x="1175" y="3110" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="23px" text-anchor="middle">Downloader...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-7"><g transform="translate(0.5,0.5)"><path d="M 10 3110 L 810 3110 L 810 3535 L 10 3535 L 10 3150 L 0 3150 L 0 3140 L 10 3140 L 10 3130 L 0 3130 L 0 3120 L 10 3120 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 10 3120 L 20 3120 L 20 3130 L 10 3130 M 10 3140 L 20 3140 L 20 3150 L 10 3150" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 788px; height: 1px; padding-top: 3117px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 32px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TCPConnection<br />(Абстракция над socket/ssl::stream)<div>Коннект - дисконнект</div><div>Чтение - Запись</div><div><br /></div><div>Не следит за состоянием полученных сообщений - читает весь сокет и передает обработчику</div></div></div></div></foreignObject><text x="415" y="3149" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="32px" text-anchor="middle">TCPConnection...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-8"><g transform="translate(0.5,0.5)"><path d="M 520 2330 L 1790 2330 L 1790 2710 L 520 2710 L 520 2370 L 510 2370 L 510 2360 L 520 2360 L 520 2350 L 510 2350 L 510 2340 L 520 2340 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 520 2340 L 530 2340 L 530 2350 L 520 2350 M 520 2360 L 530 2360 L 530 2370 L 520 2370" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1258px; height: 1px; padding-top: 2337px; margin-left: 531px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 25px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MessageProcessor<br /><div>(прослойка между IRCClient и MessageHandler)</div><div>подготавливает сырые сообщения прочитанные из клиента для передачи в MessageHandler</div><div>Берет на себя парсинг и класификацию.<br /><br />Следит за состоянием сообщений, обеспечивает их инвариант посредством хранения состояний неполных сообщений (Когда последние байты считанные с сокета являются обрывком сообщения, которое придет в начале следующих байт)</div><div><br />Принимает решение - продолжать чтение или прерывать соединение.</div></div></div></div></foreignObject><text x="1160" y="2362" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="25px" text-anchor="middle">MessageProcessor...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-9"><g transform="translate(0.5,0.5)"><path d="M 570 2760 L 1720 2760 L 1720 3030 L 570 3030 L 570 2800 L 560 2800 L 560 2790 L 570 2790 L 570 2780 L 560 2780 L 560 2770 L 570 2770 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 570 2770 L 580 2770 L 580 2780 L 570 2780 M 570 2790 L 580 2790 L 580 2800 L 570 2800" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1138px; height: 1px; padding-top: 2767px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 19px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MessageHandler<div>(Обработчик сообщений)</div><div>Не следит за состояниями</div><div>Ожидает идеальных, классифицированных сообщений</div><div><br /></div><div>Читает сообщение - ищет ссылку на карту</div><div>Должен выполняться в отельном потоке</div><div>в текущей реализации обеспечивает ТОЛЬКО скачивание файлов</div><div><br /></div><div>ХРАНИТ экземпляр downloader - следственно хранит Connection - риск циклической зависимости при неаккуратном использовании.</div></div></div></div></foreignObject><text x="1150" y="2786" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="19px" text-anchor="middle">MessageHandler...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-10"><g transform="translate(0.5,0.5)"><path d="M 675 670 L 1665 670 L 1665 960 L 675 960 L 675 710 L 665 710 L 665 700 L 675 700 L 675 690 L 665 690 L 665 680 L 675 680 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 675 680 L 685 680 L 685 690 L 675 690 M 675 700 L 685 700 L 685 710 L 675 710" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 978px; height: 1px; padding-top: 677px; margin-left: 686px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 28px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Session<br />(Абстракция над Connection)<br />Чтение и запись http запросов.<br />Считывает запрос из Connection обеспечивает его http-валидность и передает обработчику<div><br /></div><div>Отвечает в сокет, если запрос не http-валидный</div></div></div></div></foreignObject><text x="1175" y="705" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="28px" text-anchor="middle">Session...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-11"><g transform="translate(0.5,0.5)"><path d="M 760 990 L 1580 990 L 1580 1280 L 760 1280 L 760 1030 L 750 1030 L 750 1020 L 760 1020 L 760 1010 L 750 1010 L 750 1000 L 760 1000 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 760 1000 L 770 1000 L 770 1010 L 760 1010 M 760 1020 L 770 1020 L 770 1030 L 760 1030" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 808px; height: 1px; padding-top: 997px; margin-left: 771px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 19px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">RequestHander<div>(Обработка http запросов)</div><div>Обрабатывает все эндпоинты. Отдает ответы об успехе/ошибке<br /><br />Способен просканировать состояние ВСЕЙ системы и передать его в ответе на state эндпоинт<br /><br />Взаимодействует напрямую с фронтом. Реализует 2 класса: для обработки "API" запросов и запросов к файловой системе (Отдача статических файлов)<br /><br />По сути, именно он и является GUI</div></div></div></div></foreignObject><text x="1175" y="1016" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="19px" text-anchor="middle">RequestHander...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-12"><g transform="translate(0.5,0.5)"><path d="M 50 1340 L 2280 1340 L 2280 1590 L 50 1590 L 50 1380 L 40 1380 L 40 1370 L 50 1370 L 50 1360 L 40 1360 L 40 1350 L 50 1350 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 50 1350 L 60 1350 L 60 1360 L 50 1360 M 50 1370 L 60 1370 L 60 1380 L 50 1380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 2218px; height: 1px; padding-top: 1347px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">GUI<div><br /></div><div>Интерфейс для настроек системы и отслеживания ее состояния.<br />Реализует паттерн "Фасад"</div><div>Подразумевает прослойку между системой и всеми возможными способами реализации GUI</div><div>В нашем случае - HTTP-LoopbackServer<br /><br />Определяет все методы для работы с состоянием ядра.</div></div></div></div></foreignObject><text x="1170" y="1371" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="24px" text-anchor="middle">GUI...</text></switch></g></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-16"><g transform="translate(0.5,0.5)"><path d="M 1411.47 3229.44 L 1554.01 3229.07" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1579.01 3229 L 1566.53 3236.39 L 1554.01 3229.07 L 1566.49 3221.68 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-17"><g transform="translate(0.5,0.5)"><path d="M 928.33 3230.08 L 850 3230 L 837.61 3230.09" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 812.61 3230.27 L 825.05 3222.83 L 837.61 3230.09 L 825.16 3237.53 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-19"><g transform="translate(0.5,0.5)"><path d="M 1170.11 2260 L 1169.53 2304.78" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1169.21 2329.77 L 1162.02 2317.18 L 1169.53 2304.78 L 1176.73 2317.37 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-21"><g transform="translate(0.5,0.5)"><path d="M 520 2510 L 405 2510 L 405 3084.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 405 3109.01 L 397.65 3096.51 L 405 3084.01 L 412.35 3096.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-22"><g transform="translate(0.5,0.5)"><path d="M 1170.16 3030 L 1170.08 3054.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1170 3079.01 L 1162.69 3066.49 L 1170.08 3054.01 L 1177.4 3066.54 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="JN6cPMw-TxOQun5K3mFb-26"><g transform="translate(0.5,0.5)"><path d="M 1170 2710 L 1170.08 2733.74" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1170.16 2758.74 L 1162.76 2746.27 L 1170.08 2733.74 L 1177.47 2746.22 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-1"><g transform="translate(0.5,0.5)"><path d="M 50 1650 L 2280 1650 L 2280 1900 L 50 1900 L 50 1690 L 40 1690 L 40 1680 L 50 1680 L 50 1670 L 40 1670 L 40 1660 L 50 1660 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 50 1660 L 60 1660 L 60 1670 L 50 1670 M 50 1680 L 60 1680 L 60 1690 L 50 1690" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 2218px; height: 1px; padding-top: 1657px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 27px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Core<br />Ядро системы. <br />Владеет клиентом, может его уничтожать и создавать нового для изменения конфигурации без перезапуска программы.<br />Имеет все методы необходимые как для настроек запуска клиента так и для изменения состояния клиента в реальном времени</div></div></div></foreignObject><text x="1170" y="1684" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="27px" text-anchor="middle">Core...</text></switch></g></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-2"><g transform="translate(0.5,0.5)"><path d="M 1168.96 1900 L 1169.11 1914.02" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1169.37 1939.01 L 1161.89 1926.59 L 1169.11 1914.02 L 1176.59 1926.44 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-3"><g transform="translate(0.5,0.5)"><path d="M 1168.96 1590 L 1168.96 1624.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1168.96 1649.01 L 1161.61 1636.51 L 1168.96 1624.01 L 1176.31 1636.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-10"><g transform="translate(0.5,0.5)"><path d="M 1165 1280 L 1165.94 1311.53" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1166.69 1336.51 L 1158.97 1324.24 L 1165.94 1311.53 L 1173.67 1323.8 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-11"><g transform="translate(0.5,0.5)"><path d="M 1165 960 L 1165 964.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1165 989.01 L 1157.65 976.51 L 1165 964.01 L 1172.35 976.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-12"><g transform="translate(0.5,0.5)"><path d="M 1175 310 L 1175 321.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1175 346.01 L 1167.65 333.51 L 1175 321.01 L 1182.35 333.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g><g data-cell-id="HuWuF-aMGyjMVbHq1HGF-13"><g transform="translate(0.5,0.5)"><path d="M 1171.35 639.32 L 1171.16 643.46" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1170.04 668.43 L 1163.26 655.62 L 1171.16 643.46 L 1177.95 656.28 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>